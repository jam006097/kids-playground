# アプリケーションエンドポイントとインタラクション

本システムの主要なWebエンドポイントと、それらを通じたユーザーインタラクションの概要をまとめます。本アプリケーションは主にDjangoのテンプレートレンダリングを使用し、一部の機能（お気に入り、レビュー投稿）にはAJAXリクエストを利用しています。包括的なREST APIは提供していません。

---

## 施設関連

| エンドポイント           | メソッド | 概要             | パラメータ例         | レスポンス例         | 認証 |
|------------------------|----------||------------------|----------------------|----------------------|------|
| `/`                    | GET      | 施設一覧表示      | `?city=東京都`       | HTMLページ           | 不要 |
| `/facilities/<int:pk>/`| GET      | 施設詳細表示      | なし                 | HTMLページ           | 不要 |
| `/ranking/`            | GET      | 施設ランキング表示| `?sort=review_count` | HTMLページ           | 不要 |

---

## お気に入り関連

| エンドポイント           | メソッド | 概要             | パラメータ例         | レスポンス例         | 認証 |
|------------------------|----------|------------------|----------------------|----------------------|------|
| `/favorites/`          | GET      | お気に入り一覧表示| `?city=東京都`       | HTMLページ           | 必要 |
| `/add_favorite/`       | POST     | お気に入り登録    | `playground_id`      | JSON: `{"status": "ok"}` | 必要 |
| `/remove_favorite/`    | POST     | お気に入り削除    | `playground_id`      | JSON: `{"status": "ok"}` | 必要 |

---

## レビュー関連

| エンドポイント           | メソッド | 概要             | パラメータ例         | レスポンス例         | 認証 |
|------------------------|----------|------------------|----------------------|----------------------|------|
| `/playground/<int:playground_id>/reviews/` | GET | レビュー一覧表示  | なし                 | HTMLページ           | 不要 |
| `/playground/<int:playground_id>/add_review/` | POST | レビュー投稿      | `content`, `rating`  | JSON: `{"status": "success", "message": "..."}` | 必要 |

---

## ユーザー関連（django-allauth および accounts アプリによる提供）

| エンドポイント           | メソッド | 概要             | パラメータ例         | レスポンス例         | 認証 |
|------------------------|----------|------------------|----------------------|----------------------|------|
| `/accounts/signup/`    | GET/POST | 会員登録          | `email`, `password`  | HTMLページ           | 不要 |
| `/accounts/login/`     | GET/POST | ログイン          | `email`, `password`  | HTMLページ           | 不要 |
| `/accounts/logout/`    | GET/POST | ログアウト        | なし                 | HTMLページ           | 必要 |
| `/accounts/mypage/`    | GET      | マイページ表示    | なし                 | HTMLページ           | 必要 |
| `/accounts/name/`      | GET/POST | アカウント名変更  | `account_name`       | HTMLページ           | 必要 |

---

## レスポンス例（AJAXリクエストの場合）

```json
{
  "status": "ok"
}
```

```json
{
  "status": "success",
  "message": "口コミが投稿されました！"
}
```

